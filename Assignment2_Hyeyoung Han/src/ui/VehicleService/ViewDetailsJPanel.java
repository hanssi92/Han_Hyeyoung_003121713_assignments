/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JPanel.java to edit this template
 */
package ui.VehicleService;

import Business.ServiceCatalog;
import Business.VehicleDirectory;
import java.awt.CardLayout;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import model.Vehicle;

/**
 *
 * @author Hyungs
 */
public class ViewDetailsJPanel extends javax.swing.JPanel {
    
    JPanel userProcessContainer;
    VehicleDirectory vehicleDirectory;
    ServiceCatalog serviceCatalog;
    
    private Vehicle vehicle;


    /**
     * Creates new form ViewDetailsJPanel
     */
    public ViewDetailsJPanel(JPanel container, VehicleDirectory directory, ServiceCatalog catalog, Vehicle vehicle) {
        initComponents();
        
        this.userProcessContainer = container;
        this.vehicleDirectory = directory;
        this.serviceCatalog = catalog;
        
        this.vehicle = vehicle;
        
        populateFields();
        setViewMode();

        
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        lblTitle = new javax.swing.JLabel();
        lblViewOwnerId = new javax.swing.JLabel();
        lblViewOwnerFirstName = new javax.swing.JLabel();
        lblViewOwnerLastName = new javax.swing.JLabel();
        lblViewServiceDate = new javax.swing.JLabel();
        txtViewOwnerId = new javax.swing.JTextField();
        txtViewOwnerFirstName = new javax.swing.JTextField();
        txtViewOwnerLastName = new javax.swing.JTextField();
        txtViewServiceDate = new javax.swing.JTextField();
        btnViewSave = new javax.swing.JButton();
        lblViewVehicleId = new javax.swing.JLabel();
        lblViewMake = new javax.swing.JLabel();
        lblViewModel = new javax.swing.JLabel();
        lblViewYear = new javax.swing.JLabel();
        txtViewYear = new javax.swing.JTextField();
        txtViewModel = new javax.swing.JTextField();
        txtViewMake = new javax.swing.JTextField();
        txtViewVehicleId = new javax.swing.JTextField();
        lblViewRegistrationNum = new javax.swing.JLabel();
        txtViewRegistrationNum = new javax.swing.JTextField();
        btnViewBack = new javax.swing.JButton();
        btnViewUpdate = new javax.swing.JButton();

        setBackground(new java.awt.Color(204, 204, 255));

        lblTitle.setFont(new java.awt.Font("Arial Black", 1, 18)); // NOI18N
        lblTitle.setText("View Information");

        lblViewOwnerId.setFont(new java.awt.Font("Arial Black", 1, 14)); // NOI18N
        lblViewOwnerId.setText("Owner ID :");

        lblViewOwnerFirstName.setFont(new java.awt.Font("Arial Black", 1, 14)); // NOI18N
        lblViewOwnerFirstName.setText("Owner First Name:");

        lblViewOwnerLastName.setFont(new java.awt.Font("Arial Black", 1, 14)); // NOI18N
        lblViewOwnerLastName.setText("Owner Last Name:");

        lblViewServiceDate.setFont(new java.awt.Font("Arial Black", 1, 14)); // NOI18N
        lblViewServiceDate.setText("Service Date:");

        btnViewSave.setFont(new java.awt.Font("Arial Black", 1, 12)); // NOI18N
        btnViewSave.setText("Save");
        btnViewSave.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        btnViewSave.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnViewSaveActionPerformed(evt);
            }
        });

        lblViewVehicleId.setFont(new java.awt.Font("Arial Black", 1, 14)); // NOI18N
        lblViewVehicleId.setText("Vehicle ID :");

        lblViewMake.setFont(new java.awt.Font("Arial Black", 1, 14)); // NOI18N
        lblViewMake.setText("Make : ");

        lblViewModel.setFont(new java.awt.Font("Arial Black", 1, 14)); // NOI18N
        lblViewModel.setText("Model:");

        lblViewYear.setFont(new java.awt.Font("Arial Black", 1, 14)); // NOI18N
        lblViewYear.setText("Year: ");

        lblViewRegistrationNum.setFont(new java.awt.Font("Arial Black", 1, 14)); // NOI18N
        lblViewRegistrationNum.setText("Registration Number : ");

        btnViewBack.setFont(new java.awt.Font("Arial Black", 1, 14)); // NOI18N
        btnViewBack.setText("<<< Back");
        btnViewBack.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        btnViewBack.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnViewBackActionPerformed(evt);
            }
        });

        btnViewUpdate.setFont(new java.awt.Font("Arial Black", 1, 14)); // NOI18N
        btnViewUpdate.setText("Update");
        btnViewUpdate.setBorder(javax.swing.BorderFactory.createBevelBorder(javax.swing.border.BevelBorder.RAISED));
        btnViewUpdate.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnViewUpdateActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(btnViewBack, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 260, Short.MAX_VALUE)
                .addComponent(lblTitle)
                .addGap(357, 357, 357))
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(328, 328, 328)
                        .addComponent(btnViewUpdate, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(90, 90, 90)
                        .addComponent(btnViewSave, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(287, 287, 287)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(layout.createSequentialGroup()
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                                    .addComponent(lblViewOwnerLastName, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                    .addComponent(lblViewServiceDate, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                    .addComponent(lblViewOwnerFirstName, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                    .addComponent(lblViewOwnerId, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                                .addGap(90, 90, 90)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                    .addComponent(txtViewOwnerId, javax.swing.GroupLayout.DEFAULT_SIZE, 200, Short.MAX_VALUE)
                                    .addComponent(txtViewOwnerFirstName)
                                    .addComponent(txtViewOwnerLastName)
                                    .addComponent(txtViewServiceDate)))
                            .addGroup(layout.createSequentialGroup()
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING, false)
                                        .addComponent(lblViewModel, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                        .addComponent(lblViewYear, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                        .addComponent(lblViewMake, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                        .addComponent(lblViewVehicleId, javax.swing.GroupLayout.PREFERRED_SIZE, 150, javax.swing.GroupLayout.PREFERRED_SIZE))
                                    .addComponent(lblViewRegistrationNum))
                                .addGap(60, 60, 60)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                    .addComponent(txtViewMake, javax.swing.GroupLayout.DEFAULT_SIZE, 200, Short.MAX_VALUE)
                                    .addComponent(txtViewVehicleId, javax.swing.GroupLayout.DEFAULT_SIZE, 200, Short.MAX_VALUE)
                                    .addComponent(txtViewModel, javax.swing.GroupLayout.DEFAULT_SIZE, 200, Short.MAX_VALUE)
                                    .addComponent(txtViewYear, javax.swing.GroupLayout.DEFAULT_SIZE, 200, Short.MAX_VALUE)
                                    .addComponent(txtViewRegistrationNum))))))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(27, 27, 27)
                        .addComponent(lblTitle))
                    .addGroup(layout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(btnViewBack, javax.swing.GroupLayout.PREFERRED_SIZE, 35, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addGap(40, 40, 40)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblViewOwnerId)
                    .addComponent(txtViewOwnerId, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblViewOwnerFirstName)
                    .addComponent(txtViewOwnerFirstName, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblViewOwnerLastName)
                    .addComponent(txtViewOwnerLastName, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblViewServiceDate)
                    .addComponent(txtViewServiceDate, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblViewVehicleId)
                    .addComponent(txtViewVehicleId, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblViewMake)
                    .addComponent(txtViewMake, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblViewModel)
                    .addComponent(txtViewModel, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblViewYear)
                    .addComponent(txtViewYear, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(18, 18, 18)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(lblViewRegistrationNum)
                    .addComponent(txtViewRegistrationNum, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 83, Short.MAX_VALUE)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnViewSave, javax.swing.GroupLayout.PREFERRED_SIZE, 36, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(btnViewUpdate, javax.swing.GroupLayout.PREFERRED_SIZE, 36, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(36, 36, 36))
        );
    }// </editor-fold>//GEN-END:initComponents

    private void btnViewBackActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnViewBackActionPerformed
        // TODO add your handling code here:
        userProcessContainer.remove(this);
        CardLayout layout = (CardLayout) userProcessContainer.getLayout();
        layout.previous(userProcessContainer);
    }//GEN-LAST:event_btnViewBackActionPerformed

    private void btnViewUpdateActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnViewUpdateActionPerformed
        // TODO add your handling code here:
        
        setEditMode();
        
        
    }//GEN-LAST:event_btnViewUpdateActionPerformed

    private void btnViewSaveActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnViewSaveActionPerformed
        // TODO add your handling code here:
        
        String ownerFirstName = txtViewOwnerFirstName.getText();
        String ownerLastName = txtViewOwnerLastName.getText();
        String serviceDate = txtViewServiceDate.getText();
        
        String make = txtViewMake.getText();
        String model = txtViewModel.getText();
        String yearText = txtViewYear.getText();
        String registrationNumber = txtViewRegistrationNum.getText();
        
        if (ownerFirstName.isBlank() || ownerLastName.isBlank() || serviceDate.isBlank()|| make.isBlank() || model.isBlank() || yearText.isBlank() ||
                registrationNumber.isBlank()) {
            
            JOptionPane.showMessageDialog(this, "All fields are mandatory.", "Warning", JOptionPane.WARNING_MESSAGE);
        }
        
        int year;
        
        try {
        year = Integer.parseInt(txtViewYear.getText());
        } catch (NumberFormatException e) {
        JOptionPane.showMessageDialog(this, "Year must be a number.");
        return;
        }

        vehicle.setOwnerFirstName(ownerFirstName);
        vehicle.setOwnerLastName(ownerLastName);
        vehicle.setServiceDate(serviceDate);

        vehicle.setMake(make);
        vehicle.setModel(model);
        vehicle.setYear(year);
        vehicle.setRegistrationNumber(registrationNumber);

        JOptionPane.showMessageDialog(this, "Information successfully updated.");
        
        setViewMode();

    }//GEN-LAST:event_btnViewSaveActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnViewBack;
    private javax.swing.JButton btnViewSave;
    private javax.swing.JButton btnViewUpdate;
    private javax.swing.JLabel lblTitle;
    private javax.swing.JLabel lblViewMake;
    private javax.swing.JLabel lblViewModel;
    private javax.swing.JLabel lblViewOwnerFirstName;
    private javax.swing.JLabel lblViewOwnerId;
    private javax.swing.JLabel lblViewOwnerLastName;
    private javax.swing.JLabel lblViewRegistrationNum;
    private javax.swing.JLabel lblViewServiceDate;
    private javax.swing.JLabel lblViewVehicleId;
    private javax.swing.JLabel lblViewYear;
    private javax.swing.JTextField txtViewMake;
    private javax.swing.JTextField txtViewModel;
    private javax.swing.JTextField txtViewOwnerFirstName;
    private javax.swing.JTextField txtViewOwnerId;
    private javax.swing.JTextField txtViewOwnerLastName;
    private javax.swing.JTextField txtViewRegistrationNum;
    private javax.swing.JTextField txtViewServiceDate;
    private javax.swing.JTextField txtViewVehicleId;
    private javax.swing.JTextField txtViewYear;
    // End of variables declaration//GEN-END:variables

    private void populateFields() {
        
    txtViewOwnerId.setText(vehicle.getOwnerId());
    txtViewOwnerFirstName.setText(vehicle.getOwnerFirstName());
    txtViewOwnerLastName.setText(vehicle.getOwnerLastName());
    txtViewServiceDate.setText(vehicle.getServiceDate());

    txtViewVehicleId.setText(vehicle.getVehicleId());
    txtViewMake.setText(vehicle.getMake());
    txtViewModel.setText(vehicle.getModel());
    txtViewYear.setText(String.valueOf(vehicle.getYear()));
    txtViewRegistrationNum.setText(vehicle.getRegistrationNumber());
}

    private void setViewMode() {
    
    txtViewOwnerId.setEditable(false);
    txtViewOwnerFirstName.setEditable(false);
    txtViewOwnerLastName.setEditable(false);
    txtViewServiceDate.setEditable(false);
    txtViewVehicleId.setEditable(false);
    
    txtViewMake.setEditable(false);
    txtViewModel.setEditable(false);
    txtViewYear.setEditable(false);
    txtViewRegistrationNum.setEditable(false);
    
    btnViewSave.setEnabled(true);
    btnViewUpdate.setEnabled(true);
    
    }

    private void setEditMode() {
    txtViewOwnerId.setEditable(true);
    txtViewOwnerFirstName.setEditable(true);
    txtViewOwnerLastName.setEditable(true);
    txtViewServiceDate.setEditable(true);
    txtViewVehicleId.setEditable(true);
    
    txtViewMake.setEditable(true);
    txtViewModel.setEditable(true);
    txtViewYear.setEditable(true);
    txtViewRegistrationNum.setEditable(true);
    
    btnViewSave.setEnabled(true);
    btnViewUpdate.setEnabled(true);
    
    }

}